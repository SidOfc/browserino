#!/usr/bin/env ruby

require 'bundler/setup'
require 'browserino'
require 'pry'

Browserino.define do
  general do
    locale       %r{\s(\w{2}(?:\-\w{2})?)[;\)]}i
    architecture %r{(((?:x|x86_|amd|wow)64)|i(3|6)86)}i
  end

  identify /chrome/i do
    name :chrome
    type :browser
  end

  identify /safari/i do
    name :safari
    type :browser
  end

  identify /firefox/i do
    name :firefox
    type :browser

    collect do
      version        %r{firefox/([\d\.]+)}i
      engine         %r{(gecko|servo)}i
      engine_version %r{rv:\s?([\d\.]+)}i
    end
  end
end

p Browserino.parse 'Mozilla/5.0 (X11; Linux i686 on x86_64; rv:10.0) Gecko/20100101 Firefox/10.0'
